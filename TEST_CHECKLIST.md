# 测试清单

## 前置准备

- [ ] 数据库已创建并初始化
- [ ] 配置文件已正确填写 (config/app.json)
- [ ] 5张口型图片已放置到 frontend/public/images/
- [ ] 通义百炼API凭证有效
- [ ] CosyVoice API凭证有效

## 后端测试

### 1. 配置加载测试
- [ ] 配置文件正确解析
- [ ] 所有必需配置项存在
- [ ] 数据库连接成功

### 2. 数据库测试
- [ ] 数据表创建成功
- [ ] 索引创建正确
- [ ] 数据插入和查询正常

### 3. WebSocket服务测试
- [ ] WebSocket服务启动成功
- [ ] 端口8080正常监听
- [ ] 健康检查接口响应正常 (http://localhost:8080/health)

### 4. 第三方服务集成测试
- [ ] 通义百炼API连接成功
- [ ] 流式文本接收正常
- [ ] CosyVoice语音合成成功
- [ ] 音频数据返回正常

## 前端测试

### 1. 页面加载测试
- [ ] 页面正常加载
- [ ] 样式显示正确
- [ ] 图标加载成功
- [ ] 动画图片加载成功

### 2. WebSocket连接测试
- [ ] WebSocket连接建立成功
- [ ] 连接状态显示正确
- [ ] 心跳机制正常工作
- [ ] 断线重连功能正常

### 3. 欢迎语测试
- [ ] 页面打开自动播放欢迎语
- [ ] 欢迎语文本显示正确
- [ ] 欢迎语音频播放成功
- [ ] 口型动画同步播放
- [ ] 欢迎语期间输入框禁用

### 4. 对话功能测试
- [ ] 输入框正常输入文字
- [ ] 字数统计实时显示
- [ ] 发送按钮状态正确
- [ ] 消息发送成功
- [ ] AI回复流式显示
- [ ] 语音合成成功
- [ ] 音频自动播放
- [ ] 口型动画同步

### 5. 口型同步测试
- [ ] 音量分析正确
- [ ] 5个口型状态切换流畅
- [ ] 音频播放结束恢复闭口
- [ ] GPU加速渲染流畅(60fps)

### 6. 停止功能测试
- [ ] 发送后按钮变为停止图标
- [ ] 点击停止立即中断
- [ ] 文本流停止接收
- [ ] 音频播放停止
- [ ] 口型恢复闭口
- [ ] 可立即发送新消息

### 7. 历史对话测试
- [ ] 有对话后显示历史按钮
- [ ] 点击打开历史面板
- [ ] 历史记录显示正确
- [ ] 用户和AI消息区分清晰
- [ ] 时间戳显示正确
- [ ] 关闭面板功能正常

### 8. 字数限制测试
- [ ] 字数统计正确显示
- [ ] 超过9000字变红提示
- [ ] 超过10000字禁止发送
- [ ] 提示信息正确显示

### 9. 错误处理测试
- [ ] AI服务异常提示正确
- [ ] 语音合成失败降级处理
- [ ] 网络断开提示正确
- [ ] 错误自动消失功能正常

### 10. 响应式测试
- [ ] 手机端竖屏显示正常
- [ ] 平板端显示正常
- [ ] 动画图片自适应缩放
- [ ] 横屏提示显示正确

## 端到端测试场景

### 场景1: 首次访问
1. [ ] 打开页面
2. [ ] 自动播放欢迎语
3. [ ] 欢迎语音频和口型同步
4. [ ] 欢迎语完成后可输入

### 场景2: 简单对话
1. [ ] 输入"你好"
2. [ ] 点击发送
3. [ ] AI流式返回文本
4. [ ] 语音自动播放
5. [ ] 口型同步变化
6. [ ] 播放完成回到闭口

### 场景3: 中断对话
1. [ ] 输入问题并发送
2. [ ] AI开始回复时点击停止
3. [ ] 文本和音频立即停止
4. [ ] 口型恢复闭口
5. [ ] 可立即发送新消息

### 场景4: 长文本输入
1. [ ] 输入9500字文本
2. [ ] 字数统计变红
3. [ ] 仍可发送
4. [ ] 输入10001字
5. [ ] 发送按钮禁用
6. [ ] 提示字数超限

### 场景5: 查看历史
1. [ ] 进行多轮对话
2. [ ] 点击历史按钮
3. [ ] 历史面板正确显示所有对话
4. [ ] 包含欢迎语
5. [ ] 关闭面板继续对话

### 场景6: 刷新页面
1. [ ] 刷新浏览器
2. [ ] 重新播放欢迎语
3. [ ] 对话历史不恢复
4. [ ] sessionId保留在localStorage

### 场景7: 网络异常
1. [ ] 断开网络
2. [ ] 显示连接断开提示
3. [ ] 恢复网络
4. [ ] 自动重连成功

## 性能测试

- [ ] 首屏加载时间 < 3秒
- [ ] AI响应时间 < 3秒
- [ ] 语音合成时间 < 5秒
- [ ] 口型切换流畅度 60fps
- [ ] 内存占用合理 (< 500MB)
- [ ] 连续对话10轮无异常

## 兼容性测试

### 浏览器
- [ ] Chrome (最新版)
- [ ] Safari (iOS)
- [ ] Firefox (最新版)
- [ ] Edge (最新版)

### 设备
- [ ] iPhone (竖屏)
- [ ] Android手机 (竖屏)
- [ ] iPad (竖屏)
- [ ] 桌面浏览器

## 安全测试

- [ ] XSS攻击防护
- [ ] SQL注入防护
- [ ] API密钥未暴露前端
- [ ] WebSocket认证正常

## 测试结果

测试日期: ___________
测试人员: ___________

通过项: _____ / 总数
失败项: _____

## 问题记录

| 编号 | 问题描述 | 严重程度 | 状态 |
|-----|---------|---------|------|
| 1   |         |         |      |
| 2   |         |         |      |
| 3   |         |         |      |

## 备注

